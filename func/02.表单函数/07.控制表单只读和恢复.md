# 07.控制表单只读和恢复

:::info[常用函数]
在某些场景中，比如提交成功后，界面不想关闭，又不想用户修改，那么就可以使用此函数。
:::


## 函数名

| 函数名 | 功能 |
| ---- | ---- |
| this.setFormReadOnly | 设置表单只读 |
| this.recoverFormReadOnly | 和上面函数互为反操作 |




## 示例1


### 在表单脚本中使用

此时可以免传参数

```js
this.setFormReadOnly();
this.recoverFormReadOnly();
```


### 在按钮脚本中使用

需要传入参数 formid

```js
this.setFormReadOnly({ formid: '111111111111111' });
this.recoverFormReadOnly({formid: '111111111111111'})
```

## 示例2

### 提交后控件界面只读

```js
const rows = this.getGridRows({ gid: '1684483237280' });
const amount = this.getFormVal({ col: 'price' });
let totalAmount = 0;
for (let row of rows) {
    let detailPrice = Number(row.price)
    totalAmount += detailPrice;
}

if (totalAmount != amount) {
    window.message.pcbox.confirm(
        '维保单价的总和与‘每年合同单价金额’不一致，是否继续？',
        '请确认',
        {
            type: 'warning',
        }
    ).then(() => {
        this.setFormVal({ col: "state", val: 1 });
        this.saveFormRule({
            callback: () => {
                this.setFormReadOnly({ formid: '000120221129155053QQFX4E6K' });
                // 隐藏维保配件,合同明细,维保配件
                this.hideGridOptions({ gid: '1685696291603', hideButton: true, hideRowButton: true });
                this.hideGridOptions({ gid: '1684483237280', hideButton: true, hideRowButton: true });
                this.hideGridOptions({ gid: '1685696293807', hideButton: true, hideRowButton: true });
            }
        })
    })

} else {
    this.setFormVal({ col: "state", val: 1 })
    this.saveFormRule({
        callback: () => {
            this.setFormReadOnly({ formid: '000120221129155053QQFX4E6K' });
            // 隐藏维保配件,合同明细,维保配件
            this.hideGridOptions({ gid: '1685696291603', hideButton: true, hideRowButton: true });
            this.hideGridOptions({ gid: '1684483237280', hideButton: true, hideRowButton: true });
            this.hideGridOptions({ gid: '1685696293807', hideButton: true, hideRowButton: true });
        }
    })
}

```