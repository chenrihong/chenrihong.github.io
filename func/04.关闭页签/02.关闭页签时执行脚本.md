# 02.关闭页签时执行脚本

:::danger[非按钮上使用]
打开新页签后，在关闭时想做一些提醒工作，要怎么办呢，请阅读本节。
:::

## 示例一

需求：

用户反馈临床发起报废单，老是不提交，排查了下也没有功能问题，猜测应该是提示引导有问题，之前点了生成报废就提示四个字‘生成成功’，可能是这个误导了用户，需要优化下：
1、点生成报废按钮后，提示语改成：单据已生成，请选择工程师和科室负责人，填写后点击提交，即可完成全部操作
2、点关闭时如果是未提交状态，增加弹窗提示：您的单据尚未提交，确定要关闭吗？

在表单创建时脚本中写入如下代码

```js
window['__tabCloseFn' + this.__id] = () => {
    const submitFlag = false;
    if (!submitFlag) {
        window.message.pcbox.confirm(
            '您的单据尚未提交，确定要关闭吗？',
            '询问',
            {
                confirmButtonText: '确认关闭',
                cancelButtonText: '取消',
                type: 'warning',
            }).then(() => {
                window.closeTab();
            })
    }
}
```