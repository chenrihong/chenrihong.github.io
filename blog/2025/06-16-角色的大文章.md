---
title: 角色的大文章
authors: [chenrihong]
date: 2025-06-16
tags: [思考]
---


## 背景

HRP3.0 在架构上是一个多租户的系统，每个租户都有自己的用户、角色、菜单、数据权限等。
<!--truncate-->

 
## 角色优化

### 医院角色管理

- a) 角色类型字典：用于区分不同的业务类型，如：工会、委员会、党支部、采购组、维修组、库管组，再加一个：角色。最终医院角色维护菜单需要按角色类型扩展。
- b) 医院角色表：加成员可选范围数据集ID（所有科室、所有院区）；加个分组ID列，允许为空；删除角色类别列。
- c) 新增角色组表。租户、医院、角色类型、ID、分组名称。不用配置单独菜单。
- d) 医院角色维护菜单：入参：角色类型，左侧是角色组+角色的树（需要把系统角色拼进来），支持新增修改角色组、支持新增修改角色，右侧TAB（1角色成员、2菜单权限、3数据权限）。数据权限页签内也是TAB，页签在左侧，自动取所有角色相关的权限单元生成页签。
- e) 加医院角色成员及范围数据集参数子表：等于现在的用户集合参数子表。（把大字段改成明细表去维护）
- f) 加个孙表：医院角色成员管辖范围表：租户、医院、角色ID、用户ID、用户工号、用户姓名、范围对象ID、范围对象名称。人工拉的成员的管辖范围。（范围对象取角色表的成员可选范围数据集ID）
- g) 医院角色成员表：保持现状。
- h) 医院角色成员缓存表：用于角色维护界面的成员展示。保持现状。

## 研发菜单

`239`

配置中心-系统配置-医院角色-(角色类型-角色)